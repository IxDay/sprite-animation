(function(e,t,n){"use strict";function s(e){e=Number(e);return Math[e>=0?"floor":"ceil"](e)}function o(e){return s(e.substring(0,e.length-2))}function u(e){try{var t=(new Spinner).spin(),r=s((o(e.style.height)-o(t.el.style.height))/2),i=s((o(e.style.width)-o(t.el.style.width))/2);t.el.style.margin=r+"px "+i+"px "+r+"px "+i+"px";t.el.style.float="left";e.appendChild(t.el);return t}catch(u){return n}}function a(e){var t={},n,r;t.reverse=e.getAttribute("data-reverse")!==null;t.started=e.getAttribute("data-started")!==null;if((n=e.getAttribute("data-tick"))!==null){t.tick=s(n)}if((r=e.getAttribute("data-speed"))!==null){t.speed=s(r)}return t}function f(e,t){switch(e.className){case"sprite-stop":e.addEventListener("click",function(){t.stop()});break;case"sprite-start":e.addEventListener("click",function(){t.start()});break;case"sprite-speed":e.addEventListener("change",function(){t.changeSpeed(this.options[this.selectedIndex].value)});break;case"sprite-reverse":e.addEventListener("click",function(){t.invert()});break;case"sprite-one-turn":e.addEventListener("click",function(){t.oneTurn()});break}}var r,i;r=function(e,t,n){n=n||{};var r=this,i=n.started||false,a=false,f=new Image,l,c;r.speed=n.speed||50;r.reverse=n.reverse||false;r.tick=n.tick||10;r.element=t;f.src=e;t.style.background="url("+e+")";t.style.cursor="move";c=u(t);t.addEventListener("dragstart",function(e){e.preventDefault()});t.addEventListener("mouseout",function(){a=false});t.addEventListener("mousemove",function(e){if(a){var t=s((e.clientX-l)/r.tick);if(t>=1){l=e.clientX;r.nextMove(false)}if(t<=-1){l=e.clientX;r.nextMove(true)}}});t.addEventListener("mousedown",function(e){a=true;l=e.clientX;if(r.loop){r.stop()}});t.addEventListener("mouseup",function(){a=false});f.onload=function(){var e=this.height,n=this.width,s=e>n;r.vertical=s;r.size=o(s?t.style.height:t.style.width);r.max=s?e:n;r.loaded=true;r.update(0);if(c){c.stop()}if(i){r.start()}}};r.prototype.update=function(e){this.pos=e;this.element.style.backgroundPosition=this.vertical?"0px "+e+"px":e+"px 0px"};r.prototype.start=function(){var t=this;if(!t.loop&&t.loaded){t.loop=e.setInterval(function(){t.nextMove(t.reverse)},t.speed)}};r.prototype.nextMove=function(e){var t=this,n=t.max,r=t.pos+(e?-t.size:t.size);if(r<0){r=n}if(r>n){r=0}t.update(r)};r.prototype.stop=function(){if(this.loop){e.clearInterval(this.loop);this.loop=n}};r.prototype.restart=function(e){var t=this,n=false;if(this.loop){this.stop();n=true}e(t);if(n){this.start()}};r.prototype.invert=function(){this.restart(function(e){e.reverse=!e.reverse})};r.prototype.changeSpeed=function(e){this.restart(function(t){t.speed=e})};r.prototype.oneTurn=function(){var t=this,n=t.max/t.size,r=0;if(!t.loaded){return}if(t.loop){t.stop()}t.loop=e.setInterval(function(){t.nextMove(t.reverse);r=r+1;if(r>n){t.stop()}},t.speed)};i=function(){e.onload=function(){var e,i,s,o,u=t.getElementsByClassName("sprite"),l,c,h,p,d,v=[];for(l=0,h=u.length;l<h;l=l+1){e=u[l];for(c=0,p=e.childNodes.length;c<p;c=c+1){d=e.childNodes[c];if(d.className==="sprite-buttons"){i=d}else if(d.className==="sprite-display"){s=d}}if(s!==n&&e.getAttribute("data-url")){o=a(e);e=new r(e.getAttribute("data-url"),s,o);if(i){for(c=0,p=i.childNodes.length;c<p;c=c+1){f(i.childNodes[c],e)}}}v.push(e)}return v}};e.Sprite=r;e.CreateSprite=i})(window,document)